<?php

require_once './controller/controller_api.php';
require_once './helper/helper_api.php';

$url = preg_split('~[/?]~',  $_SERVER['REQUEST_URI']);

$go = new controller_api;
$helper = new helper_api;

$message = [
    "error" => "page not found"
];

$func = $url[sizeof($url)-1];
switch ($_SERVER["REQUEST_METHOD"]) {  
    case 'GET':
        if ($func == "get_account")
            $go->get_account();
        elseif ($func == "get_notes")
            $go->get_notes();
        else
            $helper->respond(404, $message);
        break;

    case 'POST':
        if ($func == "signup")
            $go->signup();
        elseif ($func == "login")
            $go->login();
        elseif ($func == "add_notes")
            $go->add_notes();
        else
            $helper->respond(404, $message);
        break;

    default:
        $helper->respond(404, $message);
        break;
        
}

?>